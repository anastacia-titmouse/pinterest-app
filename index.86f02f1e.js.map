{"mappings":"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","sources":["src/scripts/desk.selector.js","src/scripts/desk.js","node_modules/uuid/dist/esm-browser/native.js","node_modules/uuid/dist/esm-browser/rng.js","node_modules/uuid/dist/esm-browser/stringify.js","node_modules/uuid/dist/esm-browser/v4.js","src/scripts/create.board.modal.js","src/scripts/index.js"],"sourcesContent":["import { activateDesk, getDesksModels, renderActiveDesk } from './desk';\n\nexport const cleanSelect = () => {\n  const select = document.getElementById(\"desk_selector\")\n  select.innerHTML = '';\n}\n\nexport const renderSelectOptions = () => {\n  const select = document.getElementById(\"desk_selector\")\n\n  const boardModels = getDesksModels()\n  for (let boardId of Object.keys(boardModels)) {\n    const boardModel = boardModels[boardId]\n\n    const optionEl = document.createElement('option')\n    optionEl.setAttribute('value', boardId)\n    optionEl.innerHTML = boardModel.title\n    if (boardModel.active) {\n      optionEl.setAttribute('selected', 'selected')\n    }\n\n    select.appendChild(optionEl)\n  }\n}\n\nexport const rerenderSelect = () => {\n  cleanSelect()\n  renderSelectOptions()\n}\n\nexport function onDeskSelectorChanged(deskId) {\n  activateDesk(deskId)\n  renderActiveDesk().catch(error => {console.log(error)})\n}\n\nrenderSelectOptions()","import { rerenderSelect as rerenderDesksSelector } from './desk.selector';\n\nexport function activateDesk(deskId) {\n  const desksModels = getDesksModels()\n  for (let _deskId of Object.keys(desksModels)) {\n    desksModels[_deskId].active = deskId === _deskId;\n  }\n  localStorage.setItem('desks', JSON.stringify(desksModels))\n}\n\nexport function addDesksModel(deskId, deskTitle, active) {\n  const desksModels= getDesksModels()\n\n  desksModels[deskId] = {\n    id: deskId,\n    title: deskTitle,\n    active\n  }\n\n  localStorage.setItem('desks', JSON.stringify(desksModels))\n\n  rerenderDesksSelector()\n\n  return desksModels\n}\n\nexport function getDesksModels() {\n  const desksJson = localStorage.getItem('desks')\n  if(!desksJson) {\n    return {}\n  } else {\n    return JSON.parse(desksJson)\n  }\n}\n\nexport async function fetchPinsByDeskId(deskId) {\n  if (deskId === 'main') {\n    const response = await fetch('https://63052f15697408f7edc32802.mockapi.io/api/v1/card', {method: 'get'})\n    return  response.json()\n  } else {\n    console.log('Fetch from localstorage')\n    // TODO return Array<Pin> (only items with pin.deskId === deskId) from local storage\n    return []\n  }\n}\n\nexport async function renderActiveDesk() {\n  const deskElement = document.getElementById('board_list')\n  //Clean desk list\n  deskElement.innerHTML = ''\n\n  //Init desk models if needed\n  let desksModels = getDesksModels()\n  if(Object.keys(desksModels).length === 0) {\n    desksModels = addDesksModel('main', 'Homepage', true)\n  }\n\n  //Check active desk\n  const activeDesk = getActiveDesk()\n  if (!activeDesk) {\n    throw new Error('Active desk not found')\n  }\n\n  //render pins\n  const pinsData = await fetchPinsByDeskId(activeDesk.id)\n  pinsData.map(pinData => {\n    const pinElement = createPinElement(pinData)\n    deskElement.appendChild(pinElement)\n  })\n}\n\nexport function createPinElement(pinData) {\n  const pinWrapper = document.createElement('div');\n  pinWrapper.classList.add('board-list__pin')\n\n  const image = document.createElement('img')\n  image.classList.add('board-list__pin-img')\n  image.setAttribute('src', pinData.imageUrl);\n  image.setAttribute('alt', pinData.imageUrl)\n  pinWrapper.appendChild(image)\n\n  const avatar = document.createElement('img')\n  avatar.setAttribute('src', pinData.authorAvatar);\n  avatar.classList.add('pin-avatar')\n  pinWrapper.appendChild(avatar)\n\n  const pinActionsWrapper = document.createElement('div')\n  pinActionsWrapper.classList.add('pin-actions-wrapper')\n  pinWrapper.appendChild(pinActionsWrapper)\n\n  const description = document.createElement('div')\n  description.classList.add('pin-actions-description')\n  description.textContent = pinData.description\n  pinActionsWrapper.appendChild(description)\n\n  const pinActions = document.createElement('div')\n  pinActions.classList.add('pin-actions')\n  pinActionsWrapper.appendChild(pinActions)\n\n  const addBtn = document.createElement('button')\n  addBtn.classList.add('pin-btn', 'add-pin')\n  addBtn.textContent = 'Добавить'\n  pinActions.appendChild(addBtn)\n  addBtn.onclick = () => {\n    console.log(pinData.id)\n    //TODO\n  }\n\n  const complaintBtn = document.createElement('button')\n  complaintBtn.classList.add('pin-btn', 'complaint-pin')\n  complaintBtn.textContent = 'Пожаловаться'\n  pinActions.appendChild(complaintBtn)\n\n  return pinWrapper\n}\n\nexport function getActiveDesk() {\n  const desksModels = getDesksModels()\n  const activeDeskId = Object.keys(desksModels)\n    .find(deskId => (desksModels[deskId].active))\n  if (activeDeskId) {\n    return desksModels[activeDeskId]\n  }\n}","const randomUUID = typeof crypto !== 'undefined' && crypto.randomUUID && crypto.randomUUID.bind(crypto);\nexport default {\n  randomUUID\n};","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nlet getRandomValues;\nconst rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nconst byteToHex = [];\n\nfor (let i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).slice(1));\n}\n\nexport function unsafeStringify(arr, offset = 0) {\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  return (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase();\n}\n\nfunction stringify(arr, offset = 0) {\n  const uuid = unsafeStringify(arr, offset); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  if (native.randomUUID && !buf && !options) {\n    return native.randomUUID();\n  }\n\n  options = options || {};\n  const rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (let i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return unsafeStringify(rnds);\n}\n\nexport default v4;","import {getDesksModels, addDesksModel} from './desk'\nimport { v4 as uuidv4 } from 'uuid';\n\nexport const openModal = () => {\n    const modalEl = document.getElementById(\"create_board_modal\")\n\n    if (modalEl) {\n        modalEl.style.display = 'block'\n    }\n}\n\nexport const closeModal = () => {\n  const modalEl = document.getElementById(\"create_board_modal\")\n  modalEl.style.display = 'none'\n  setModalError('')\n}\n\nexport const setModalError = (errorText) => {\n  const errorBlock = document.querySelector(\"#crete_board_modal_form_error\")\n\n  if (!errorText) {\n    errorBlock.classList.contains('visible') && errorBlock.classList.remove('visible')\n  } else {\n    errorBlock.textContent = errorText\n    errorBlock.classList.add('visible')\n  }\n}\n\nexport const cleanForm = () => {\n  const input = document.querySelector(\"#create_board_modal_desk_title_input\")\n  input.value = ''\n  setModalError('')\n}\n\nexport const onCreateDeskSubmit = (event) => {\n  event.preventDefault()\n  const form = document.getElementById(\"crete_board_modal_form\")\n  const input = form.querySelector(\"#create_board_modal_desk_title_input\")\n  const deskTitle = input.value\n\n  if (!deskTitle) {\n    setModalError('Missing desk title')\n    return\n  }\n\n  const desksModels = getDesksModels()\n  const isDeskTitleAlreadyExists = Object.keys(desksModels).some(deskId => {\n    return deskTitle === desksModels[deskId].title\n  })\n\n  if (isDeskTitleAlreadyExists) {\n    setModalError('Desk with same title already exists')\n    return\n  }\n\n  addDesksModel(uuidv4(), deskTitle, false)\n  cleanForm()\n  closeModal()\n}","import { renderActiveDesk } from './desk';\nimport { cancelComplaint } from \"./complaint.modal\";\nimport { onDeskSelectorChanged } from \"./desk.selector\";\nimport {\n  openModal as openCreateBoardModal,\n  closeModal as closeCreateBoardModal, onCreateDeskSubmit,\n} from './create.board.modal';\n\n// init\ndocument.addEventListener('DOMContentLoaded', () => {\n  renderActiveDesk().catch(error => {console.log(error)})\n\n  // document.getElementById('complaint_modal_cancel').addEventListener('click', cancelComplaint);\n  // document.getElementById('desk_selector').addEventListener('change', event => (onDeskSelectorChanged(event.target.value)))\n  // TODO event listeners\n  document.getElementById('create_desk_btn').addEventListener('click', () => {openCreateBoardModal()})\n  document.getElementById('close_create_board_modal').addEventListener('click', () => {closeCreateBoardModal()})\n  document.getElementById('crete_board_modal_form').addEventListener('submit', event => {onCreateDeskSubmit(event)})\n  document.getElementById('desk_selector').addEventListener('change', event => {onDeskSelectorChanged(event.target.value)})\n});"],"names":["$005d6420f20e0205$export$a1a1b486d60901d7","select","document","getElementById","boardModels","$a793c543e1aeee79$export$4c1d62dca661069b","boardId","Object","keys","boardModel","optionEl","createElement","setAttribute","innerHTML","title","active","appendChild","$005d6420f20e0205$export$a75eed5b9bb4fc6e","$005d6420f20e0205$export$636a7e63584a3e44","deskId","$a793c543e1aeee79$export$98d3b26ba84259ba","$a793c543e1aeee79$export$db57c4a3f40b7fbb","catch","error","console","log","desksModels","_deskId","localStorage","setItem","JSON","stringify","$a793c543e1aeee79$export$65209e172153dce6","deskTitle","id","desksJson","getItem","parse","async","deskElement","length","activeDesk","activeDeskId","find","$a793c543e1aeee79$export$e6ca18920bc0cb42","Error","fetch","method","json","$a793c543e1aeee79$export$32ebd45305befc2c","map","pinData","pinElement","pinWrapper","classList","add","image","imageUrl","avatar","authorAvatar","pinActionsWrapper","description","textContent","pinActions","addBtn","onclick","complaintBtn","$a793c543e1aeee79$export$d08c21158cb91cf6","$5afbd4fb4df23c28$export$2e2bcd8739ae039","crypto","randomUUID","bind","$ecc82b4b4d5334a5$var$getRandomValues","$ecc82b4b4d5334a5$var$rnds8","Uint8Array","$ecc82b4b4d5334a5$export$2e2bcd8739ae039","getRandomValues","$5ce84198744ccadf$var$byteToHex","i","push","toString","slice","$5ce84198744ccadf$export$8fb373d660548968","arr","offset","toLowerCase","$87befc68df50040c$export$2e2bcd8739ae039","options","buf","rnds","random","rng","$9ca66cd3593dee79$export$a7f6cffb6b8ba11c","modalEl","style","display","$9ca66cd3593dee79$export$3f6fecd573f3fa48","$9ca66cd3593dee79$export$4347fb2465b349b3","errorText","errorBlock","querySelector","contains","remove","$9ca66cd3593dee79$export$180240ec292ac4e0","event","preventDefault","value","some","addEventListener","target"],"version":3,"file":"index.86f02f1e.js.map"}